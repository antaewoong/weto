<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WETO Token - We're Together | Official Token Sale</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --weto-primary: #4F7EFF;
      --weto-secondary: #6B8FFF;
      --weto-accent: #FF6B8A;
      --weto-success: #00D4AA;
      --weto-dark: #0B0D1A;
      --weto-darker: #070814;
      --weto-card: rgba(255, 255, 255, 0.08);
      --weto-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --border-radius: 24px;
      --border-radius-sm: 16px;
      --shadow-glow: 0 0 80px rgba(79, 126, 255, 0.4);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Inter", sans-serif;
      color: #ffffff;
      background: var(--weto-darker);
      background-image: 
        radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.4) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 107, 138, 0.2) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(79, 126, 255, 0.15) 0%, transparent 50%);
      overflow-x: hidden;
      min-height: 100vh;
    }

    /* Header */
    .header-section {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      padding: 20px 0;
      background: rgba(11, 13, 26, 0.8);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .header-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 40px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 16px;
      text-decoration: none;
      font-family: "Outfit", sans-serif;
      font-weight: 800;
      font-size: 32px;
      color: #ffffff;
    }

    .weto-icon {
      width: 48px;
      height: 48px;
      background: var(--weto-gradient);
      border-radius: var(--border-radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 20px;
      color: white;
    }

    .header-nav {
      display: flex;
      align-items: center;
      gap: 40px;
    }

    .nav-link {
      color: rgba(255, 255, 255, 0.7);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
    }

    .nav-link:hover {
      color: #ffffff;
    }

    .connect-wallet-btn {
      background: var(--weto-card);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: var(--border-radius-sm);
      padding: 14px 28px;
      color: #ffffff;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(20px);
    }

    .connect-wallet-btn:hover {
      border-color: rgba(79, 126, 255, 0.5);
      transform: translateY(-2px);
    }

    /* Main Section */
    .main-section {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      padding: 140px 40px 80px;
    }

    .main-content {
      text-align: center;
      max-width: 900px;
      z-index: 10;
      position: relative;
    }

    .presale-badge {
      display: inline-block;
      padding: 16px 32px;
      background: var(--weto-card);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 50px;
      font-size: 16px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 40px;
      backdrop-filter: blur(20px);
      color: #ffffff;
    }

    .countdown-timer {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin: 50px 0;
      flex-wrap: wrap;
    }

    .time-box {
      background: var(--weto-card);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: var(--border-radius);
      padding: 28px 20px;
      min-width: 90px;
      backdrop-filter: blur(30px);
      transition: transform 0.3s ease;
    }

    .time-box:hover {
      transform: translateY(-5px);
    }

    .time-number {
      font-family: "Orbitron", monospace;
      font-size: 36px;
      font-weight: 900;
      line-height: 1;
      margin-bottom: 12px;
      color: #ffffff;
      background: linear-gradient(135deg, #ffffff 0%, #4F7EFF 50%, #FF6B8A 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .time-label {
      font-size: 14px;
      font-weight: 700;
      color: rgba(255, 255, 255, 0.8);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .main-title {
      font-family: "Outfit", sans-serif;
      font-size: 72px;
      font-weight: 900;
      line-height: 1.1;
      margin: 50px 0 30px;
      background: linear-gradient(135deg, #ffffff 0%, #4F7EFF 50%, #FF6B8A 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .main-subtitle {
      font-size: 20px;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 60px;
      line-height: 1.7;
      max-width: 650px;
      margin-left: auto;
      margin-right: auto;
    }

    /* BNB Price Display */
    .bnb-price-display {
      background: var(--weto-card);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 12px 20px;
      margin: 20px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      backdrop-filter: blur(20px);
    }

    .bnb-price-label {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.7);
      font-weight: 500;
    }

    .bnb-price-value {
      font-family: "Orbitron", monospace;
      font-size: 16px;
      font-weight: 700;
      color: #ffffff;
    }

    .progress-section {
      margin: 50px 0;
    }

    .progress-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      font-size: 14px;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.8);
    }

    .progress-bar-container {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      height: 12px;
      overflow: hidden;
      position: relative;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .progress-bar {
      height: 100%;
      background: var(--weto-gradient);
      border-radius: 12px;
      width: 18.75%;
      transition: width 2s ease;
      position: relative;
    }

    .progress-text {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 11px;
      font-weight: 700;
      color: rgba(255, 255, 255, 0.9);
    }

    .price-info {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin: 40px 0;
      flex-wrap: wrap;
    }

    .price-item {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.7);
      text-align: center;
      transition: all 0.3s ease;
    }

    .price-item:hover {
      transform: translateY(-2px);
      color: rgba(255, 255, 255, 0.9);
    }

    .price-value {
      display: block;
      font-family: "Orbitron", monospace;
      font-size: 16px;
      font-weight: 600;
      color: #ffffff;
      margin-top: 4px;
    }

    .weto-highlight {
      color: var(--weto-primary);
      font-weight: 700;
    }

    .buy-btn {
      background: var(--weto-gradient);
      border: none;
      border-radius: var(--border-radius);
      padding: 20px 60px;
      font-size: 18px;
      font-weight: 700;
      color: #ffffff;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      cursor: pointer;
      transition: all 0.4s ease;
      margin: 40px 0;
      box-shadow: var(--shadow-glow);
    }

    .buy-btn:hover {
      transform: translateY(-4px) scale(1.05);
      box-shadow: 0 20px 60px rgba(79, 126, 255, 0.6);
    }

    .buy-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    /* Modal Styles */
    .modal-content {
      background: rgba(11, 13, 26, 0.95);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: var(--border-radius);
      backdrop-filter: blur(40px);
    }

    .modal-header {
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding: 20px 24px;
    }

    .modal-title {
      color: #ffffff;
      font-weight: 800;
      font-size: 20px;
      font-family: "Outfit", sans-serif;
    }

    .btn-close {
      background: var(--weto-card);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      width: 32px;
      height: 32px;
      color: #ffffff;
      opacity: 1;
    }

    .modal-body {
      padding: 0 24px 24px;
    }

    .form-group {
      margin-bottom: 24px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      font-size: 14px;
      color: rgba(255, 255, 255, 0.8);
    }

    .form-input-group {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      display: flex;
      transition: border-color 0.3s ease;
    }

    .form-input-group:focus-within {
      border-color: rgba(79, 126, 255, 0.5);
    }

    .form-input {
      flex: 1;
      background: transparent;
      border: none;
      padding: 16px 20px;
      color: #ffffff;
      font-size: 16px;
      font-weight: 600;
    }

    .form-input:focus {
      outline: none;
    }

    .form-input::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }

    .token-selector {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px 20px;
      border-left: 1px solid rgba(255, 255, 255, 0.1);
      min-width: 140px;
    }

    .token-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      font-weight: bold;
    }

    .token-symbol {
      font-weight: 600;
      color: #ffffff;
    }

    .transaction-info {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 20px;
      margin: 24px 0;
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .info-row:last-child {
      margin-bottom: 0;
      padding-top: 12px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      font-weight: 600;
    }

    .info-label {
      color: rgba(255, 255, 255, 0.7);
    }

    .info-value {
      color: #ffffff;
      font-weight: 600;
    }

    .wallet-list {
      list-style: none;
      padding: 0;
      margin: 24px 0;
    }

    .wallet-link {
      display: flex;
      align-items: center;
      gap: 20px;
      padding: 20px 24px;
      background: var(--weto-card);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: var(--border-radius-sm);
      color: #ffffff;
      text-decoration: none;
      margin-bottom: 16px;
      transition: all 0.3s ease;
      cursor: pointer;
      width: 100%;
      text-align: left;
    }

    .wallet-link:hover {
      border-color: rgba(79, 126, 255, 0.4);
      color: #ffffff;
      transform: translateY(-2px);
    }

    .wallet-icon {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: bold;
      flex-shrink: 0;
    }

    .wallet-name {
      font-weight: 600;
      font-size: 16px;
      color: #ffffff;
    }

    /* Status Messages */
    .status-message {
      position: fixed;
      top: 100px;
      right: 20px;
      padding: 16px 24px;
      border-radius: 12px;
      color: white;
      font-weight: 600;
      z-index: 9999;
      max-width: 350px;
      transform: translateX(100%);
      transition: transform 0.4s ease;
    }

    .status-message.show {
      transform: translateX(0);
    }

    .status-success {
      background: rgba(76, 175, 80, 0.9);
    }

    .status-error {
      background: rgba(244, 67, 54, 0.9);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .header-inner {
        padding: 0 20px;
      }

      .header-nav .nav-link {
        display: none;
      }

      .main-section {
        padding: 100px 20px 40px;
      }

      .main-title {
        font-size: 42px;
      }

      .countdown-timer {
        gap: 12px;
      }

      .time-box {
        padding: 16px 12px;
        min-width: 70px;
      }

      .time-number {
        font-size: 28px;
      }

      .modal-dialog {
        margin: 10px;
        max-width: 90%;
      }

      .token-selector {
        border-left: none;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
      }

      .form-input-group {
        flex-direction: column;
      }
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header class="header-section">
    <div class="header-inner">
      <a href="https://weto.asia/index_en.html" class="logo">
        <div class="weto-icon">W</div>
        WETO
      </a>
      
      <nav class="header-nav">
        <a href="#" class="nav-link" onclick="downloadWhitepaper()">Whitepaper</a>
        <button class="connect-wallet-btn" onclick="handleWalletConnection()" id="connectBtn">Connect Wallet</button>
      </nav>
    </div>
  </header>

  <!-- Main Section -->
  <main class="main-section">
    <div class="main-content">
      <div class="presale-badge">Pre-Sale Live Now!</div>
      
      <div class="countdown-timer">
        <div class="time-box">
          <div class="time-number" id="days">25</div>
          <div class="time-label">Days</div>
        </div>
        <div class="time-box">
          <div class="time-number" id="hours">14</div>
          <div class="time-label">Hours</div>
        </div>
        <div class="time-box">
          <div class="time-number" id="minutes">32</div>
          <div class="time-label">Minutes</div>
        </div>
        <div class="time-box">
          <div class="time-number" id="seconds">45</div>
          <div class="time-label">Seconds</div>
        </div>
      </div>

      <h1 class="main-title">We're Together<br>Decentralized Platform</h1>
      
      <p class="main-subtitle">
        Join the MyMoment ecosystem and reap the benefits of the blockchain revolution!<br>
        Just 30 seconds of donation creates a better world together.
      </p>

      <!-- BNB Price Display -->
      <div class="bnb-price-display">
        <span class="bnb-price-label">Current BNB Price:</span>
        <span class="bnb-price-value" id="bnbPriceDisplay">$600.00</span>
      </div>

      <div class="progress-section">
        <div class="progress-info">
          <span>STAGE 1: 10% BONUS!</span>
          <span id="progressText">15,000,000 / 80,000,000</span>
        </div>
        <div class="progress-bar-container">
          <div class="progress-bar" id="progressBar">
            <div class="progress-text" id="progressPercent">18.8%</div>
          </div>
        </div>
      </div>

      <div class="price-info">
        <div class="price-item">
          <span class="price-value">1 <span class="weto-highlight">WETO</span> = $1.00</span>
        </div>
        <div class="price-item">
          <span class="price-value">Total Supply: 80M Tokens</span>
        </div>
        <div class="price-item">
          <span class="price-value">Bonus: 10%</span>
        </div>
      </div>

      <button class="buy-btn" data-bs-toggle="modal" data-bs-target="#buyModal">
        Buy WETO Now
      </button>
    </div>
  </main>

  <!-- Buy Modal -->
  <div class="modal fade" id="buyModal" tabindex="-1" aria-labelledby="buyModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title" id="buyModalLabel">Be an early WETO investor</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label class="form-label">Balance: <span id="walletBalance">0 BNB</span></label>
          </div>

          <div class="form-group">
            <label class="form-label">Amount (BNB)</label>
            <div class="form-input-group">
              <input type="number" class="form-input" placeholder="0.1" value="0.1" id="buyAmount" min="0.01" step="0.01">
              <div class="token-selector">
                <div class="token-icon" style="background: #F3BA2F; color: white;">BNB</div>
                <span class="token-symbol">BNB</span>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Get Amount (WETO)</label>
            <div class="form-input-group">
              <input type="text" class="form-input" id="getAmount" value="60" disabled>
              <div class="token-selector">
                <div class="token-icon weto-icon">W</div>
                <span class="token-symbol">WETO</span>
              </div>
            </div>
          </div>

          <div class="transaction-info">
            <div class="info-row">
              <span class="info-label">WETO Price</span>
              <span class="info-value">$1.00</span>
            </div>
            <div class="info-row">
              <span class="info-label">BNB Price</span>
              <span class="info-value" id="modalBnbPrice">$600.00</span>
            </div>
            <div class="info-row">
              <span class="info-label">Bonus (10%)</span>
              <span class="info-value" id="bonusAmount">6 WETO</span>
            </div>
            <div class="info-row">
              <span class="info-label">Total WETO (with bonus)</span>
              <span class="info-value" id="totalAmount">66</span>
            </div>
          </div>

          <button class="buy-btn" id="buyBtn" style="width: 100%; margin: 0;" onclick="buyWETOTokens()">
            Buy WETO Now
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Connect Modal -->
  <div class="modal fade" id="connectModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Connect a Wallet</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <ul class="wallet-list">
            <li>
              <button type="button" class="wallet-link" onclick="connectMetaMask()">
                <div class="wallet-icon" style="background: #f6851b; color: white;">MM</div>
                <span class="wallet-name">MetaMask</span>
              </button>
            </li>
            <li>
              <button type="button" class="wallet-link" onclick="connectTrustWallet()">
                <div class="wallet-icon" style="background: #3375BB; color: white;">TW</div>
                <span class="wallet-name">Trust Wallet</span>
              </button>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.7.0/web3.min.js"></script>

  <script>
    // Global variables
    let web3 = null;
    let userAccount = null;
    let isConnected = false;
    let currentBNBPrice = 600;

    // WETO Configuration
    const WETO_CONFIG = {
      tokenPrice: 1.00,
      bonusPercent: 10,
      maxTokensForSale: 80000000,
      presaleEnd: new Date('2024-12-31T23:59:59Z')
    };

    // BNB price fetcher using multiple sources
    async function updateBNBPrice() {
      const dataSources = [
        {
          name: 'CoinGecko',
          url: 'https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd',
          parser: (data) => data.binancecoin?.usd
        },
        {
          name: 'CryptoCompare',
          url: 'https://min-api.cryptocompare.com/data/price?fsym=BNB&tsyms=USD',
          parser: (data) => data.USD
        }
      ];

      for (const source of dataSources) {
        try {
          console.log(`Trying ${source.name}...`);
          const response = await fetch(source.url);
          
          if (response.ok) {
            const data = await response.json();
            const price = source.parser(data);
            
            if (price && !isNaN(price)) {
              currentBNBPrice = parseFloat(price);
              document.getElementById('bnbPriceDisplay').textContent = '$' + currentBNBPrice.toFixed(2);
              document.getElementById('modalBnbPrice').textContent = '$' + currentBNBPrice.toFixed(2);
              calculateWETOAmount();
              console.log(`âœ… BNB price updated from ${source.name}:`, currentBNBPrice);
              return;
            }
          }
        } catch (error) {
          console.log(`âŒ ${source.name} failed:`, error.message);
        }
      }
      
      // All sources failed - use fallback
      console.log('âš ï¸ All price sources failed, using fallback price');
      currentBNBPrice = 600;
      document.getElementById('bnbPriceDisplay').textContent = '$600.00';
      document.getElementById('modalBnbPrice').textContent = '$600.00';
    }

    // Calculate WETO amount
    function calculateWETOAmount() {
      const buyAmountInput = document.getElementById('buyAmount');
      const getAmountInput = document.getElementById('getAmount');
      const bonusAmountSpan = document.getElementById('bonusAmount');
      const totalAmountSpan = document.getElementById('totalAmount');
      
      if (!buyAmountInput || !getAmountInput) return;

      const bnbAmount = parseFloat(buyAmountInput.value) || 0;
      
      if (bnbAmount > 0 && currentBNBPrice > 0) {
        const usdAmount = bnbAmount * currentBNBPrice;
        const wetoAmount = Math.floor(usdAmount / WETO_CONFIG.tokenPrice);
        const bonusTokens = Math.floor(wetoAmount * WETO_CONFIG.bonusPercent / 100);
        const totalTokens = wetoAmount + bonusTokens;
        
        getAmountInput.value = wetoAmount.toLocaleString();
        if (bonusAmountSpan) bonusAmountSpan.textContent = bonusTokens.toLocaleString() + ' WETO';
        if (totalAmountSpan) totalAmountSpan.textContent = totalTokens.toLocaleString();
      } else {
        getAmountInput.value = '0';
        if (bonusAmountSpan) bonusAmountSpan.textContent = '0 WETO';
        if (totalAmountSpan) totalAmountSpan.textContent = '0';
      }
    }

    // Connect MetaMask
    async function connectMetaMask() {
      try {
        if (typeof window.ethereum === 'undefined') {
          showStatus('MetaMask not installed. Please install MetaMask extension.', 'error');
          return;
        }

        const accounts = await window.ethereum.request({
          method: 'eth_requestAccounts',
        });

        if (accounts && accounts.length > 0) {
          web3 = new Web3(window.ethereum);
          userAccount = accounts[0];
          isConnected = true;
          
          updateWalletUI();
          closeModal('connectModal');
          showStatus('âœ… MetaMask connected successfully!', 'success');
        }
      } catch (error) {
        console.error('Connection error:', error);
        showStatus('Connection failed. Please try again.', 'error');
      }
    }

    // Connect Trust Wallet
    async function connectTrustWallet() {
      await connectMetaMask();
    }

    // Update wallet UI
    async function updateWalletUI() {
      if (!isConnected || !userAccount || !web3) return;

      try {
        const connectBtn = document.getElementById('connectBtn');
        const walletBalance = document.getElementById('walletBalance');

        // Update button text
        const shortAddress = userAccount.slice(0, 6) + '...' + userAccount.slice(-4);
        if (connectBtn) connectBtn.textContent = shortAddress;

        // Update balance
        const balance = await web3.eth.getBalance(userAccount);
        const bnbBalance = web3.utils.fromWei(balance, 'ether');
        const displayBalance = parseFloat(bnbBalance).toFixed(4);
        
        if (walletBalance) walletBalance.textContent = displayBalance + ' BNB';
      } catch (error) {
        console.error('Error updating wallet UI:', error);
      }
    }

    // Buy WETO tokens
    function buyWETOTokens() {
      if (!isConnected) {
        showStatus('Please connect your wallet first!', 'error');
        return;
      }

      const buyAmountInput = document.getElementById('buyAmount');
      const bnbAmount = parseFloat(buyAmountInput.value);
      
      if (!bnbAmount || bnbAmount <= 0) {
        showStatus('Please enter a valid BNB amount!', 'error');
        return;
      }

      if (bnbAmount < 0.01) {
        showStatus('Minimum purchase amount is 0.01 BNB', 'error');
        return;
      }

      // Demo transaction
      const usdAmount = bnbAmount * currentBNBPrice;
      const wetoAmount = Math.floor(usdAmount / WETO_CONFIG.tokenPrice);
      const bonusTokens = Math.floor(wetoAmount * WETO_CONFIG.bonusPercent / 100);
      const totalTokens = wetoAmount + bonusTokens;
      
      showStatus('Demo: Purchase successful! You would receive ' + totalTokens.toLocaleString() + ' WETO tokens.', 'success');
      closeModal('buyModal');
    }

    // Show status message
    function showStatus(message, type) {
      const existingStatus = document.getElementById('statusMessage');
      if (existingStatus) {
        existingStatus.remove();
      }

      const statusDiv = document.createElement('div');
      statusDiv.id = 'statusMessage';
      statusDiv.className = 'status-message status-' + type + ' show';
      statusDiv.innerHTML = message;
      document.body.appendChild(statusDiv);

      setTimeout(function() {
        if (statusDiv && statusDiv.parentNode) {
          statusDiv.classList.remove('show');
          setTimeout(function() {
            if (statusDiv && statusDiv.parentNode) {
              statusDiv.remove();
            }
          }, 400);
        }
      }, 5000);

      statusDiv.onclick = function() {
        statusDiv.classList.remove('show');
        setTimeout(function() {
          if (statusDiv && statusDiv.parentNode) {
            statusDiv.remove();
          }
        }, 400);
      };
    }

    // Close modal helper
    function closeModal(modalId) {
      const modalElement = document.getElementById(modalId);
      if (modalElement) {
        const modal = bootstrap.Modal.getInstance(modalElement);
        if (modal) {
          modal.hide();
        }
      }
    }

    // Handle wallet connection button
    function handleWalletConnection() {
      if (isConnected) {
        showStatus('Disconnect functionality - check MetaMask to disconnect manually', 'success');
      } else {
        const connectModal = new bootstrap.Modal(document.getElementById('connectModal'));
        connectModal.show();
      }
    }

    // Download whitepaper
    function downloadWhitepaper() {
      showStatus('ðŸ“„ Downloading WETO whitepaper...', 'success');
      window.open('https://weto.asia/assets/pdf/weto%20whitepaper_EN.pdf', '_blank');
    }

    // Initialize countdown timer
    function initCountdown() {
      const endDate = WETO_CONFIG.presaleEnd.getTime();

      function updateTimer() {
        const now = new Date().getTime();
        const distance = endDate - now;

        if (distance < 0) {
          document.getElementById('days').textContent = '00';
          document.getElementById('hours').textContent = '00';
          document.getElementById('minutes').textContent = '00';
          document.getElementById('seconds').textContent = '00';
          return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        document.getElementById('days').textContent = String(days).padStart(2, '0');
        document.getElementById('hours').textContent = String(hours).padStart(2, '0');
        document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
        document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
      }

      updateTimer();
      setInterval(updateTimer, 1000);
    }

    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', function() {
      console.log('ðŸš€ WETO Token Sale Platform Initialized');
      
      // Initialize functions
      initCountdown();
      updateBNBPrice();
      calculateWETOAmount();
      
      // Update BNB price every 5 minutes
      setInterval(updateBNBPrice, 5 * 60 * 1000);

      // Add event listeners
      const buyAmountInput = document.getElementById('buyAmount');
      if (buyAmountInput) {
        buyAmountInput.addEventListener('input', calculateWETOAmount);
        buyAmountInput.addEventListener('change', calculateWETOAmount);
      }

      // Ethereum event listeners
      if (typeof window.ethereum !== 'undefined') {
        window.ethereum.on('accountsChanged', function (accounts) {
          if (accounts.length === 0) {
            isConnected = false;
            userAccount = null;
            const connectBtn = document.getElementById('connectBtn');
            if (connectBtn) connectBtn.textContent = 'Connect Wallet';
            const walletBalance = document.getElementById('walletBalance');
            if (walletBalance) walletBalance.textContent = '0 BNB';
          } else if (isConnected && accounts[0] !== userAccount) {
            userAccount = accounts[0];
            updateWalletUI();
          }
        });

        window.ethereum.on('chainChanged', function (chainId) {
          if (chainId !== '0x38' && isConnected) {
            showStatus('âš ï¸ Please switch to BSC network for optimal experience', 'error');
          }
        });
      }

      // Show welcome message
      setTimeout(function() {
        showStatus('Welcome to WETO Token Sale! Connect your wallet to get started.', 'success');
      }, 2000);
    });
  </script>
</body>
</html>